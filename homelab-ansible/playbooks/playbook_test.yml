---
- name: Test playbook for gateway node
  hosts: gateway
  become: yes

  tasks:
    - name: Update package list
      apt:
        update_cache: yes

    - name: Instalar HTOP
      apt:
        name: htop
        state: present
    
    - name: Verificar que HTOP est√° instalado
      command: htop --version
      register: htop_version
    - debug:
        var: htop_version.stdout
    
    - name: Check connection to nodes
      ping:
      delegate_to: "{{ item }}"
      with_items: "{{ groups['nodes'] }}"
      register: ping_results
    - debug:
        var: ping_results.results